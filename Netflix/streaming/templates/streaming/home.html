{% extends 'base.html' %}

{% block title %}Inicio{% endblock %}

{% block content %}
<h1>Bienvenido a Mi Plataforma</h1>
<!-- Películas -->
<section>
    <h2>Películas Populares</h2>
    <div class="grid-container">
        {% for movie in popular_movies %}
        <div class="card">
            <img src="{{ movie.poster_path }}" alt="{{ movie.title }}">
            <div class="card-content">
                <h3>{{ movie.title }}</h3>
                <p>{{ movie.overview|truncatewords:20 }}</p>
                <p><strong>Fecha:</strong> {{ movie.release_date }}</p>
                <p><strong>Calificación:</strong> {{ movie.vote_average }}</p>
                <meta name="csrf-token" content="{{ csrf_token }}">
                <button class="toggle-list-button" data-id="{{ movie.id }}" data-type="movie">
                    Agregar a Mi Lista
                </button>
            </div>
        </div>
        {% endfor %}
    </div>

    <h2>Películas Mejor Valoradas</h2>
    <div class="grid-container">
        {% for movie in top_rated_movies %}
        <div class="card">
            <img src="{{ movie.poster_path }}" alt="{{ movie.title }}">
            <div class="card-content">
                <h3>{{ movie.title }}</h3>
                <p>{{ movie.overview|truncatewords:20 }}</p>
                <p><strong>Fecha:</strong> {{ movie.release_date }}</p>
                <p><strong>Calificación:</strong> {{ movie.vote_average }}</p>
                <meta name="csrf-token" content="{{ csrf_token }}">
                <button class="toggle-list-button" data-id="{{ movie.id }}" data-type="movie">
                    Agregar a Mi Lista
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Series -->
<section>
    <h2>Series Populares</h2>
    <div class="grid-container">
        {% for show in popular_tv_shows %}
        <div class="card">
            <img src="{{ show.poster_path }}" alt="{{ show.title }}">
            <div class="card-content">
                <h3>{{ show.title }}</h3>
                <p>{{ show.overview|truncatewords:20 }}</p>
                <p><strong>Fecha:</strong> {{ show.first_air_date }}</p>
                <p><strong>Calificación:</strong> {{ show.vote_average }}</p>
                <meta name="csrf-token" content="{{ csrf_token }}">
                <button class="toggle-list-button" data-id="{{ show.id }}" data-type="tv_show">
                    Agregar a Mi Lista
                </button>
            </div>
        </div>
        {% endfor %}
    </div>

    <h2>Series Mejor Valoradas</h2>
    <div class="grid-container">
        {% for show in top_rated_tv_shows %}
        <div class="card">
            <img src="{{ show.poster_path }}" alt="{{ show.title }}">
            <div class="card-content">
                <h3>{{ show.title }}</h3>
                <p>{{ show.overview|truncatewords:20 }}</p>
                <p><strong>Fecha:</strong> {{ show.first_air_date }}</p>
                <p><strong>Calificación:</strong> {{ show.vote_average }}</p>
                <meta name="csrf-token" content="{{ csrf_token }}">
                <button class="toggle-list-button" data-id="{{ show.id }}" data-type="tvshow">
                    Agregar a Mi Lista
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}